{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Field, reduxForm, getFormValues } from 'redux-form';\nimport { loginUser, logoutUser, getUserData } from \"../../../actions/auth/authAction\";\nimport { toastify } from \"../../../components/Toast/Toastify\";\nimport TextInput from \"../../../components/Form/Input\";\nimport { getMy } from \"../../../actions/foodcourt/foodCourtAction\";\nimport { GUARD_OWNER } from \"../../../constants\";\nconst styles = {\n  formContent: {\n    marginTop: '50px'\n  },\n  content: {\n    paddingTop: '40px'\n  }\n};\n\nconst Register = ({\n  invalid,\n  submitting,\n  handleSubmit,\n  loginUser,\n  getUserData,\n  getMyFoodcourt\n}) => {\n  const history = useHistory();\n\n  const onSubmit = async values => {\n    console.log('Values ', values);\n    console.log('submit ', submitting, invalid);\n    const result = await loginUser({\n      username: values.email,\n      password: values.password\n    }, GUARD_OWNER);\n    console.log('RESPONSE USER ', result);\n\n    if (result.success) {\n      const resUser = await getUserData(GUARD_OWNER);\n\n      if (resUser.success) {\n        if (resUser.data && resUser.data.roleId === 3) {\n          toastify({\n            type: 'success',\n            message: result.meta.message\n          });\n          const resFood = await getMyFoodcourt({\n            isAll: 1\n          });\n          console.log('GET MY FOOD COURT ', resFood);\n\n          if (resFood.success && resFood.data && resFood.data.length > 0) {\n            history.push('/owner/select-foodcourt');\n          } else {\n            history.push('/owner/register-foodcourt');\n          }\n        } else {\n          logoutUser(GUARD_OWNER);\n          toastify({\n            type: 'error',\n            message: 'Unauthenticated'\n          });\n        }\n      } else {\n        toastify({\n          type: 'error',\n          message: 'Login Error'\n        });\n      }\n    } else {\n      toastify({\n        type: 'error',\n        message: result.message\n      });\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"row owner-container\"\n  }, __jsx(\"div\", {\n    className: \"col s12 m7 l7 cover-image\"\n  }, __jsx(\"img\", {\n    className: \"image\",\n    src: \"static/Image/fcm-cover.jpg\",\n    alt: \"\"\n  })), __jsx(\"div\", {\n    className: \"col s12 m5 l5 content\",\n    style: styles.content\n  }, __jsx(\"h4\", null, \"Masuk ke Akun Kamu\"), __jsx(\"p\", null, \"Segera daftarkan foodcourt kamu, dan segera bergabung bersama kami dalam meningkatkan pelayanan foodcourt kamu\"), __jsx(\"div\", {\n    className: \"form-content\",\n    style: styles.formContent\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(Field, {\n    id: \"email\",\n    name: \"email\",\n    label: \"Email\",\n    type: \"email\",\n    component: TextInput\n  }), __jsx(Field, {\n    id: \"password\",\n    name: \"password\",\n    label: \"Kata Sandi\",\n    type: \"password\",\n    component: TextInput\n  }), __jsx(\"div\", {\n    className: \"button-login\"\n  }, __jsx(\"button\", {\n    disabled: invalid || submitting,\n    className: \"waves-effect waves-light btn btn-app bg-pimary\"\n  }, \"Masuk\"), __jsx(\"div\", {\n    className: \"forgot-password\"\n  }, __jsx(\"span\", null, \"Belum punya akun ? \"), __jsx(Link, {\n    to: \"/owner/register\",\n    className: \"color-primary waves-effect\"\n  }, \"Daftar Sekarang\"))))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    values: getFormValues('FormRegisterOwner')(state)\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  loginUser: (data, guard) => dispatch(loginUser(data, guard)),\n  getUserData: guard => dispatch(getUserData(guard)),\n  logoutUser: guard => dispatch(logoutUser(guard)),\n  getMyFoodcourt: data => dispatch(getMy(data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(reduxForm({\n  form: 'FormRegisterOwner' // validate\n\n})(Register));","map":null,"metadata":{},"sourceType":"module"}