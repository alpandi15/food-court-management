{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Field, reduxForm, getFormValues } from 'redux-form';\nimport SelectionDefault from \"../../components/Form/Selection\";\nimport { set } from \"../../services/utils/storage\";\nimport { toastify } from \"../../components/Toast/Toastify\";\nimport { getMy } from \"../../actions/foodcourt/foodCourtAction\"; // import generateOption from '../../actions/utils/generateOption'\n\nconst generateOption = datas => {\n  let options = [];\n  datas.map(value => {\n    return options.push({\n      value: String(value.id),\n      id: String(value.id),\n      label: value.name\n    });\n  });\n  return options;\n};\n\nconst STORAGE = 'owner_foodcourt_selected';\n\nconst SelectFoodCourt = ({\n  invalid,\n  loading,\n  submitting,\n  handleSubmit,\n  getMy,\n  list // initialize\n\n}) => {\n  const history = useHistory();\n  const [listFoodcourt, setList] = React.useState(null);\n  React.useEffect(() => {\n    const fetch = async () => {\n      await getMy();\n      console.log('MY API ');\n    };\n\n    fetch();\n  }, []);\n  React.useEffect(() => {\n    if (list && list.length > 0) {\n      setList([{\n        value: '',\n        label: '[PILIH FOOD COURT]'\n      }, ...list]);\n    }\n  }, [list]);\n\n  const onSubmit = values => {\n    console.log(values);\n\n    if (values && values.id) {\n      set(STORAGE, values.id);\n      history.push('/owner');\n    } else {\n      toastify({\n        type: 'error',\n        message: 'Mohon Pilih Food Court'\n      });\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"row owner-container\"\n  }, __jsx(\"div\", {\n    className: \"col s12 m12 l12 content-select-foodcourt\"\n  }, __jsx(\"div\", {\n    className: \"select-food-court\"\n  }, __jsx(\"img\", {\n    src: \"static/Image/fcm-cover.jpg\",\n    alt: \"\",\n    className: \"image\"\n  }), __jsx(\"div\", {\n    className: \"text\"\n  }, \"Terima Kasih Sudah Bergabung Dengan Kami\"), __jsx(\"div\", {\n    className: \"form-selection\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(\"div\", {\n    className: \"input\"\n  }, __jsx(Field, {\n    id: \"id\",\n    name: \"id\",\n    label: \"Pilih Food Court\",\n    options: listFoodcourt,\n    component: SelectionDefault,\n    className: \"select-foodcourt\"\n  })), __jsx(\"div\", {\n    className: \"button\"\n  }, __jsx(\"button\", {\n    disabled: invalid || submitting || loading,\n    className: \"waves-effect waves-light btn btn-app bg-pimary\"\n  }, \"Lanjut ke Halaman Dashboard\"))))))));\n};\n\nconst mapStateToProps = state => {\n  const {\n    foodCourt\n  } = state;\n  return {\n    values: getFormValues('FormSelectionFoodcourt')(state),\n    list: generateOption(foodCourt.list)\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  getMy: data => dispatch(getMy(data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(reduxForm({\n  form: 'FormSelectionFoodcourt'\n})(SelectFoodCourt));","map":null,"metadata":{},"sourceType":"module"}