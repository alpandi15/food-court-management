{"ast":null,"code":"import _toConsumableArray from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nvar LEFT_PAGE = 'LEFT';\nvar RIGHT_PAGE = 'RIGHT';\n\nvar range = function range(from, to) {\n  var step = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var i = from;\n  var range = [];\n\n  while (i <= to) {\n    range.push(i);\n    i += step;\n  }\n\n  return range;\n};\n\nvar Pagination = /*#__PURE__*/function (_Component) {\n  _inherits(Pagination, _Component);\n\n  var _super = _createSuper(Pagination);\n\n  function Pagination(props) {\n    var _this;\n\n    _classCallCheck(this, Pagination);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"gotoPage\", function (page) {\n      var _this$props$onPageCha = _this.props.onPageChanged,\n          onPageChanged = _this$props$onPageCha === void 0 ? function (f) {\n        return f;\n      } : _this$props$onPageCha;\n      var currentPage = Math.max(0, Math.min(page, _this.totalPages));\n      var paginationData = {\n        currentPage: currentPage,\n        totalPages: _this.totalPages,\n        pageLimit: _this.pageLimit,\n        totalRecords: _this.totalRecords\n      };\n\n      _this.setState({\n        currentPage: currentPage,\n        showingData: currentPage * _this.pageLimit\n      }, function () {\n        return onPageChanged(paginationData);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function (page, evt) {\n      evt.preventDefault();\n\n      _this.gotoPage(page);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMoveLeft\", function (evt) {\n      var currentPage = _this.state.currentPage;\n      evt.preventDefault();\n\n      _this.gotoPage(currentPage - _this.pageNeighbours * 2 - 1);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMoveRight\", function (evt) {\n      var currentPage = _this.state.currentPage;\n      evt.preventDefault();\n\n      _this.gotoPage(currentPage + _this.pageNeighbours * 2 + 1);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchPageNumbers\", function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          totalPages = _assertThisInitialize.totalPages;\n\n      var currentPage = _this.state.currentPage;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          pageNeighbours = _assertThisInitialize2.pageNeighbours;\n\n      var totalNumbers = _this.pageNeighbours * 2 + 3;\n      var totalBlocks = totalNumbers + 2;\n\n      if (totalPages > totalBlocks) {\n        var pages = [];\n        var leftBound = currentPage - pageNeighbours;\n        var rightBound = currentPage + pageNeighbours;\n        var beforeLastPage = totalPages - 1;\n        var startPage = leftBound > 2 ? leftBound : 2;\n        var endPage = rightBound < beforeLastPage ? rightBound : beforeLastPage;\n        pages = range(startPage, endPage);\n        var pagesCount = pages.length;\n        var singleSpillOffset = totalNumbers - pagesCount - 1;\n        var leftSpill = startPage > 2;\n        var rightSpill = endPage < beforeLastPage;\n        var leftSpillPage = LEFT_PAGE;\n        var rightSpillPage = RIGHT_PAGE;\n\n        if (leftSpill && !rightSpill) {\n          var extraPages = range(startPage - singleSpillOffset, startPage - 1);\n          pages = [leftSpillPage].concat(_toConsumableArray(extraPages), _toConsumableArray(pages));\n        } else if (!leftSpill && rightSpill) {\n          var _extraPages = range(endPage + 1, endPage + singleSpillOffset);\n\n          pages = [].concat(_toConsumableArray(pages), _toConsumableArray(_extraPages), [rightSpillPage]);\n        } else if (leftSpill && rightSpill) {\n          pages = [leftSpillPage].concat(_toConsumableArray(pages), [rightSpillPage]);\n        }\n\n        return [1].concat(_toConsumableArray(pages), [totalPages]);\n      }\n\n      return range(1, totalPages);\n    });\n\n    var _props$totalRecords = props.totalRecords,\n        totalRecords = _props$totalRecords === void 0 ? null : _props$totalRecords,\n        _props$pageLimit = props.pageLimit,\n        pageLimit = _props$pageLimit === void 0 ? 30 : _props$pageLimit,\n        _props$pageNeighbours = props.pageNeighbours,\n        _pageNeighbours = _props$pageNeighbours === void 0 ? 0 : _props$pageNeighbours;\n\n    _this.pageLimit = typeof pageLimit === 'number' ? pageLimit : 30;\n    _this.totalRecords = typeof totalRecords === 'number' ? totalRecords : 0;\n    _this.pageNeighbours = typeof _pageNeighbours === 'number' ? Math.max(0, Math.min(_pageNeighbours, 2)) : 0;\n    _this.totalPages = Math.ceil(_this.totalRecords / _this.pageLimit);\n    _this.state = {\n      currentPage: 1,\n      showingData: 1,\n      showingTo: 1\n    };\n    return _this;\n  }\n\n  _createClass(Pagination, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          startPage = _this$props.startPage,\n          pageLimit = _this$props.pageLimit;\n      this.setState({\n        currentPage: startPage,\n        showingData: startPage * pageLimit - (pageLimit - 1),\n        showingTo: startPage * pageLimit <= this.totalRecords ? startPage * pageLimit : this.totalRecords\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.totalRecords) return null;\n      if (this.totalPages === 1) return null;\n      var _this$state = this.state,\n          currentPage = _this$state.currentPage,\n          showingData = _this$state.showingData,\n          showingTo = _this$state.showingTo;\n      var pages = this.fetchPageNumbers();\n      return __jsx(\"div\", {\n        className: \"pagination-container\"\n      }, __jsx(\"div\", {\n        className: \"info\"\n      }, \"Showing \".concat(showingData, \" to \").concat(showingTo, \" of \").concat(this.totalRecords, \" entries\")), __jsx(\"div\", {\n        className: \"control\"\n      }, __jsx(\"ul\", {\n        className: \"pagination\"\n      }, pages.map(function (page, index) {\n        if (page === LEFT_PAGE) {\n          return __jsx(\"li\", {\n            key: index,\n            className: \"waves-effect\"\n          }, __jsx(\"div\", {\n            className: \"button-page\",\n            \"aria-label\": \"Previous\",\n            onClick: _this2.handleMoveLeft\n          }, __jsx(\"i\", {\n            className: \"material-icons\"\n          }, \"chevron_left\")));\n        }\n\n        if (page === RIGHT_PAGE) {\n          return __jsx(\"li\", {\n            key: index,\n            className: \"waves-effect\"\n          }, __jsx(\"div\", {\n            className: \"button-page\",\n            \"aria-label\": \"Next\",\n            onClick: _this2.handleMoveRight\n          }, __jsx(\"i\", {\n            className: \"material-icons\"\n          }, \"chevron_right\")));\n        }\n\n        return __jsx(\"li\", {\n          key: index,\n          className: \"waves-effect\".concat(currentPage === page ? ' active' : '')\n        }, __jsx(\"div\", {\n          style: {\n            cursor: 'pointer'\n          },\n          className: \"button-page\",\n          onClick: function onClick(e) {\n            return _this2.handleClick(page, e);\n          }\n        }, page));\n      }))));\n    }\n  }]);\n\n  return Pagination;\n}(Component);\n\nexport default Pagination;","map":null,"metadata":{},"sourceType":"module"}