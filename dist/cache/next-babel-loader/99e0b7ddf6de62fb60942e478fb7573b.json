{"ast":null,"code":"import _regeneratorRuntime from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport Layout from 'components/Owner/layout';\nimport CustomeHelmet from 'components/CustomHelmet';\nimport Paginate from 'components/Pagination';\nimport { getAll as _getAll, deleteData as _deleteData } from 'actions/categoryStand/categoryStandAction';\nimport { get } from 'services/utils/storage';\nimport { toastify } from 'components/Toast/Toastify';\nimport { GUARD_OWNER, FOODCOURT_SELECTED } from '../../../constants';\nvar InputSearch = /*#__PURE__*/React.lazy(function () {\n  return import('../../../components/Form/SearchInput');\n});\nvar Pagination = /*#__PURE__*/React.memo(Paginate);\nvar MemoLayout = /*#__PURE__*/React.memo(Layout);\nvar WAIT_INTERVAL = 1000; // const ENTER_KEY = 13\n\nvar limit = 10;\n\nvar Stand = function Stand(_ref) {\n  var getAll = _ref.getAll,\n      loadingData = _ref.loadingData,\n      listData = _ref.listData,\n      pagination = _ref.pagination,\n      deleteData = _ref.deleteData;\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      totalPage = _React$useState2[0],\n      setTotalPage = _React$useState2[1];\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      totalData = _React$useState4[0],\n      setTotalData = _React$useState4[1];\n\n  var _React$useState5 = React.useState({\n    page: 1,\n    keyword: null\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      params = _React$useState6[0],\n      setParams = _React$useState6[1];\n\n  React.useEffect(function () {\n    var fetch = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var foodCourtId;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return get(FOODCOURT_SELECTED);\n\n              case 2:\n                foodCourtId = _context.sent;\n                _context.next = 5;\n                return getAll(_objectSpread({\n                  foodCourtId: foodCourtId,\n                  sort: '-createdAt',\n                  limit: limit\n                }, params), GUARD_OWNER);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetch() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetch();\n  }, [getAll, params]);\n  React.useEffect(function () {\n    if (pagination) {\n      setTotalData(pagination.totalData);\n      setTotalPage(pagination.lastPage);\n    }\n  }, [pagination]);\n\n  var onPageChanged = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data) {\n      var currentPage;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              currentPage = data.currentPage;\n              setParams({\n                page: Number(currentPage),\n                keyword: params.keyword || null\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onPageChanged(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var debounce = function debounce(func, delay) {\n    var debounceTimer;\n    return function () {\n      var context = this;\n      var args = arguments;\n      clearTimeout(debounceTimer);\n      debounceTimer = setTimeout(function () {\n        return func.apply(context, args);\n      }, delay);\n    };\n  };\n\n  var handleChange = function handleChange(event) {\n    event.persist();\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      page: 1,\n      sort: '-createdAt',\n      keyword: event.target.value\n    }));\n    console.log('Ini Value ', event.target.value);\n  };\n\n  var onSearch = debounce(handleChange, WAIT_INTERVAL);\n\n  var onDelete = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      var confm, res, foodCourtId;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              confm = window.confirm('Delete this data ?');\n\n              if (!confm) {\n                _context3.next = 15;\n                break;\n              }\n\n              _context3.next = 4;\n              return deleteData(id, GUARD_OWNER);\n\n            case 4:\n              res = _context3.sent;\n\n              if (res.success) {\n                _context3.next = 9;\n                break;\n              }\n\n              toastify({\n                type: 'error',\n                message: res.message || res.detail\n              });\n              _context3.next = 15;\n              break;\n\n            case 9:\n              _context3.next = 11;\n              return get(FOODCOURT_SELECTED);\n\n            case 11:\n              foodCourtId = _context3.sent;\n              _context3.next = 14;\n              return getAll(_objectSpread({\n                foodCourtId: foodCourtId,\n                page: 1,\n                sort: '-createdAt'\n              }, params));\n\n            case 14:\n              toastify({\n                type: 'success',\n                message: res.meta.message\n              });\n\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onDelete(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(MemoLayout, null, __jsx(CustomeHelmet, {\n    title: \"List Category Stand\"\n  }), __jsx(\"div\", {\n    className: \"owner-content\"\n  }, __jsx(\"div\", {\n    className: \"header-title\"\n  }, __jsx(\"div\", {\n    className: \"header-content\"\n  }, __jsx(\"h5\", null, \"Management Kategori Stand\"), __jsx(Link, {\n    to: \"/owner/category-stand/create\",\n    className: \"btn btn-app-outline waves-effect\"\n  }, \"Tambah Kategori\"))), __jsx(\"div\", {\n    className: \"content\"\n  }, __jsx(\"div\", {\n    className: \"list-stand list\"\n  }, __jsx(\"div\", {\n    className: \"search\"\n  }, __jsx(InputSearch, {\n    name: \"search\",\n    placeholder: \"Cari Kategori\",\n    onChange: onSearch\n  })), __jsx(\"table\", null, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"#\"), __jsx(\"th\", null, \"Nama Kategori\"), __jsx(\"th\", null, \"Tanggal Dibuat\"), __jsx(\"th\", null, \"Operator\"))), __jsx(\"tbody\", null, loadingData && __jsx(\"tr\", null, __jsx(\"td\", {\n    colSpan: \"4\"\n  }, \"Loading...\")), !loadingData && listData && listData.length > 0 ? listData.map(function (val, index) {\n    return __jsx(\"tr\", {\n      key: index\n    }, __jsx(\"td\", null, index + 1), __jsx(\"td\", null, val.name), __jsx(\"td\", null, moment(val.createdAt).format('DD-MM-YYYY H:m')), __jsx(\"td\", {\n      className: \"actions\"\n    }, __jsx(Link, {\n      to: \"/owner/category-stand/edit/\".concat(val.uuid),\n      className: \"btn-action waves-effect\"\n    }, __jsx(\"i\", {\n      className: \"material-icons\"\n    }, \"edit\")), __jsx(\"div\", {\n      className: \"btn-action waves-effect\",\n      onClick: function onClick(e) {\n        return onDelete(val.id, e);\n      }\n    }, __jsx(\"i\", {\n      className: \"material-icons\"\n    }, \"delete_forever\"))));\n  }) : __jsx(\"tr\", null, __jsx(\"td\", {\n    colSpan: \"4\"\n  }, \"Data Tidak Ada\")))), __jsx(\"div\", {\n    className: \"pagination\"\n  }, !loadingData && totalPage && totalPage > 0 ? __jsx(Pagination, {\n    totalRecords: totalData,\n    pageLimit: limit,\n    pageNeighbours: 1,\n    onPageChanged: onPageChanged,\n    startPage: params.page\n  }) : '')))));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var categoryStandStore = state.categoryStandStore;\n  return {\n    loadingData: categoryStandStore.loading,\n    listData: categoryStandStore.list,\n    pagination: categoryStandStore.meta && categoryStandStore.meta.pagination\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getAll: function getAll(data, guard) {\n      return dispatch(_getAll(data, guard));\n    },\n    deleteData: function deleteData(id, guard) {\n      return dispatch(_deleteData(id, guard));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Stand);","map":null,"metadata":{},"sourceType":"module"}