{"ast":null,"code":"import _regeneratorRuntime from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button } from 'react-materialize';\nimport { connect } from 'react-redux';\nimport Select from \"../Form/SelectionDefault\";\nimport Modal from \"../Modal\";\nimport { logoutUser as _logoutUser } from \"../../actions/auth/authAction\";\nimport { getMy as _getMy } from \"../../actions/foodcourt/foodCourtAction\";\nimport { get, set } from \"../../services/utils/storage\";\nimport Image from \"../Image\";\nimport noImage from \"../../static/Image/default_image.png\";\nimport { GUARD_OWNER, FOODCOURT_SELECTED } from \"../../constants\";\n\nvar generateOption = function generateOption(datas) {\n  var options = [];\n  datas.map(function (value) {\n    return options.push({\n      value: String(value.id),\n      id: String(value.id),\n      label: value.name\n    });\n  });\n  return options;\n};\n\nvar MemoModal = /*#__PURE__*/React.memo(Modal);\n\nvar SideNav = function SideNav(_ref) {\n  var userData = _ref.userData,\n      logoutUser = _ref.logoutUser,\n      getMy = _ref.getMy,\n      list = _ref.list;\n  var history = useHistory();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      modal = _React$useState2[0],\n      setModal = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      selected = _React$useState4[0],\n      setSelected = _React$useState4[1];\n\n  React.useEffect(function () {\n    var fetch = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getMy();\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetch() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetch();\n  }, [getMy]);\n  React.useEffect(function () {\n    var selectedCache = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var getCache;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(list && list.length > 0)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.next = 3;\n                return get(FOODCOURT_SELECTED);\n\n              case 3:\n                getCache = _context2.sent;\n                setSelected(getCache);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function selectedCache() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    selectedCache();\n  }, [list, get]); // const handleModal = (status) => {\n  //   setModal(status)\n  // }\n\n  var handleModal = React.useCallback(setModal, []);\n  var handleLogout = React.useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return logoutUser(GUARD_OWNER);\n\n          case 2:\n            setModal(false);\n            history.push('/owner/login');\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  })), []);\n\n  var handleSelected = function handleSelected(id) {\n    setSelected(id);\n    set(FOODCOURT_SELECTED, id);\n    console.log(selected);\n    window.location.reload();\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"col s12 m4 l3\"\n  }, __jsx(\"div\", {\n    className: \"profile-content\"\n  }, __jsx(\"div\", {\n    className: \"image\"\n  }, __jsx(Image, {\n    src: userData && userData.image && userData.image.url,\n    className: \"user-image\",\n    alt: \"Profile\",\n    defaultsrc: noImage,\n    style: {\n      width: '100%'\n    }\n  })), __jsx(\"div\", {\n    className: \"name\"\n  }, userData ? userData.name : 'No Name'), __jsx(\"div\", {\n    className: \"content-select\"\n  }, __jsx(Select, {\n    options: list,\n    onChange: function onChange(e) {\n      return handleSelected(e.target.value);\n    },\n    defaultValue: selected || null,\n    className: \"select-foodcourt\"\n  }))), __jsx(\"div\", {\n    className: \"nav-menu\"\n  }, __jsx(Link, {\n    to: \"/owner\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"dashboard\"), \"Dashboard\"), __jsx(Link, {\n    to: \"/owner/stand\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"device_hub\"), \"Stand\"), __jsx(Link, {\n    to: \"/owner/register\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"table_chart\"), \"Management Meja\"), __jsx(Link, {\n    to: \"/owner/register\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"book\"), \"Laporan\"), __jsx(Link, {\n    to: \"/owner/settings\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"settings\"), \"Pengaturan\")), __jsx(\"div\", {\n    onClick: function onClick() {\n      return handleModal(true);\n    },\n    className: \"container-logout waves-effect\"\n  }, __jsx(\"div\", {\n    className: \"logout\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"login\"), \"Logout\"))), __jsx(MemoModal, {\n    open: modal,\n    onCloseStart: handleModal,\n    id: \"ModalInformasi\",\n    endingTop: \"40%\",\n    footerContent: null\n  }, __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"modal-content-owner\"\n  }, __jsx(\"div\", {\n    className: \"modal-title logout\"\n  }, \"Ingin keluar dari akun kamu ?\")), __jsx(\"div\", {\n    className: \"modal-footer-owner\"\n  }, __jsx(Button, {\n    className: \"waves-effect waves-light\",\n    modal: \"close\",\n    node: \"button\",\n    style: {\n      color: 'red !important'\n    }\n  }, \"Tidak\"), __jsx(\"button\", {\n    className: \"waves-effect waves-light btn red\",\n    onClick: function onClick() {\n      return handleLogout();\n    },\n    node: \"button\",\n    style: {\n      backgroundColor: 'red !important'\n    }\n  }, \"Keluar\")))));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var accountStore = state.accountStore,\n      foodCourt = state.foodCourt;\n  return {\n    loadingUser: accountStore.loading,\n    userData: accountStore.currentItem,\n    list: generateOption(foodCourt.list)\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    logoutUser: function logoutUser(guard) {\n      return dispatch(_logoutUser(guard));\n    },\n    getMy: function getMy(data) {\n      return dispatch(_getMy(data));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SideNav);","map":null,"metadata":{},"sourceType":"module"}