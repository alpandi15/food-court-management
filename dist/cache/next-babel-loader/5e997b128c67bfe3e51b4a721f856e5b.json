{"ast":null,"code":"import _extends from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Field, reduxForm, getFormValues } from 'redux-form';\nimport ReactMapGL, { GeolocateControl, Marker } from 'react-map-gl';\nimport TextInput from \"../../components/Form/Input\";\nimport TextArea from \"../../components/Form/TextArea\";\nimport ImageUploader from \"../../components/Form/ImageUploader\";\nimport cover from \"../../static/Image/fcm-cover.jpg\";\nimport { config } from \"../../config\";\nimport { toastify } from \"../../components/Toast/Toastify\";\nimport { formatTimes } from \"../../services/utils/masking\";\nimport Pin from \"../../static/Icon/Pin\";\nimport ControlPanel from \"./control-panel\";\nimport { add as _createFoodcourt } from \"../../actions/foodcourt/foodCourtAction\";\n\nvar Register = function Register(_ref) {\n  var invalid = _ref.invalid,\n      loading = _ref.loading,\n      submitting = _ref.submitting,\n      handleSubmit = _ref.handleSubmit,\n      createFoodcourt = _ref.createFoodcourt;\n  var history = useHistory();\n\n  var _React$useState = React.useState({\n    width: 400,\n    height: 400,\n    latitude: 3.581399,\n    longitude: 98.685758,\n    zoom: 14\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      viewport = _React$useState2[0],\n      setViewport = _React$useState2[1];\n\n  var _React$useState3 = React.useState({\n    latitude: 3.581399,\n    longitude: 98.685758\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      marker = _React$useState4[0],\n      setMarker = _React$useState4[1];\n\n  var _React$useState5 = React.useState({}),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      events = _React$useState6[0],\n      setEvent = _React$useState6[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('Values ', _objectSpread(_objectSpread({}, values), {}, {\n                location: {\n                  lat: viewport.latitude,\n                  lng: viewport.longitude\n                }\n              }));\n              _context.next = 3;\n              return createFoodcourt({\n                name: values.name || '',\n                address: values.address || '',\n                image: values.image || '',\n                description: values.description || '',\n                timeOpen: values.timeOpen || '',\n                timeClose: values.timeClose || '',\n                location: {\n                  lat: viewport.latitude,\n                  lng: viewport.longitude\n                }\n              });\n\n            case 3:\n              result = _context.sent;\n\n              if (result.success) {\n                toastify({\n                  type: 'success',\n                  message: result.meta.message\n                });\n                history.push('/owner');\n              } else {\n                toastify({\n                  type: 'error',\n                  message: result.message\n                });\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  React.useEffect(function () {\n    setMarker({\n      latitude: 3.581399,\n      longitude: 98.685758\n    });\n  }, []);\n\n  var _logDragEvent = function _logDragEvent(name, event) {\n    setEvent(_objectSpread(_objectSpread({}, events), {}, _defineProperty({}, name, event.lngLat)));\n  };\n\n  var _onMarkerDragStart = function _onMarkerDragStart(event) {\n    _logDragEvent('onDragStart', event);\n  };\n\n  var _onMarkerDrag = function _onMarkerDrag(event) {\n    _logDragEvent('onDrag', event);\n  };\n\n  var _onMarkerDragEnd = function _onMarkerDragEnd(event) {\n    _logDragEvent('onDragEnd', event);\n\n    setMarker({\n      longitude: event.lngLat[0],\n      latitude: event.lngLat[1]\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"row owner-container\"\n  }, __jsx(\"div\", {\n    className: \"col s12 m12 l7 image-content\"\n  }, __jsx(\"div\", {\n    className: \"information\"\n  }, __jsx(\"img\", {\n    className: \"logo\",\n    src: cover,\n    alt: \"\"\n  }), __jsx(\"div\", {\n    className: \"title\"\n  }, \"Terima Kasih Sudah Bergabung Dengan Kami\"), __jsx(\"p\", null, \"Tim kami akan segera menghubungi kamu dalam waktu 1x24 Jam untuk mengkonfirmasi pendaftaran kamu\"))), __jsx(\"div\", {\n    className: \"col s12 m12 l5 content\"\n  }, __jsx(\"div\", {\n    className: \"form-content\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(\"div\", null, __jsx(Field, {\n    id: \"name\",\n    name: \"name\",\n    label: \"Nama Food Court\",\n    type: \"text\",\n    component: TextInput,\n    contentStyle: {\n      width: '100%'\n    }\n  })), __jsx(\"div\", null, __jsx(Field, {\n    id: \"address\",\n    name: \"address\",\n    label: \"Alamat\",\n    type: \"text\",\n    component: TextArea,\n    dataLength: 200,\n    contentStyle: {\n      width: '100%'\n    }\n  })), __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between'\n    }\n  }, __jsx(Field, {\n    id: \"timeOpen\",\n    name: \"timeOpen\",\n    label: \"Jam Buka (Format {MM:DD})\",\n    type: \"text\",\n    component: TextInput,\n    format: formatTimes // placeholder=\"12:30\"\n    // normalize={normalizeAmount}\n\n  }), __jsx(Field, {\n    id: \"timeClose\",\n    name: \"timeClose\",\n    label: \"Jam Tutup (Format {MM:DD})\",\n    type: \"text\",\n    component: TextInput,\n    format: formatTimes // placeholder=\"22:00\"\n\n  })), __jsx(\"div\", null, __jsx(Field, {\n    type: \"file\",\n    contentClass: \"\",\n    className: \"team-logo\",\n    name: \"image\",\n    id: \"image\",\n    label: \"Cover Food Court\",\n    component: ImageUploader,\n    contentStyle: {\n      width: '100%'\n    }\n  })), __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"input-field col\",\n    style: {\n      height: '300px',\n      \"float\": 'none'\n    }\n  }, __jsx(ReactMapGL, _extends({}, viewport, {\n    onViewportChange: function onViewportChange(nextViewport) {\n      return setViewport(nextViewport);\n    },\n    mapboxApiAccessToken: config.mapToken,\n    mapStyle: \"mapbox://styles/mapbox/streets-v11\",\n    width: \"100%\",\n    height: \"300px\",\n    captureClick: true\n  }), __jsx(GeolocateControl, {\n    positionOptions: {\n      enableHighAccuracy: true\n    },\n    trackUserLocation: true\n  }), __jsx(Marker, {\n    longitude: marker.longitude,\n    latitude: marker.latitude,\n    offsetTop: -20,\n    offsetLeft: -10,\n    draggable: true,\n    onDragStart: _onMarkerDragStart,\n    onDrag: _onMarkerDrag,\n    onDragEnd: _onMarkerDragEnd\n  }, __jsx(Pin, {\n    size: 20\n  })), __jsx(ControlPanel, {\n    events: events\n  })))), __jsx(\"div\", {\n    className: \"button-login\"\n  }, __jsx(\"button\", {\n    disabled: invalid || submitting || loading,\n    className: \"waves-effect waves-light btn btn-app bg-pimary\"\n  }, \"Simpan\")))))));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    values: getFormValues('FormRegisterOwner')(state)\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    createFoodcourt: function createFoodcourt(data) {\n      return dispatch(_createFoodcourt(data));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(reduxForm({\n  form: 'FormRegisterOwner' // validate\n\n})(Register));","map":null,"metadata":{},"sourceType":"module"}