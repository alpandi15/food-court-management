{"ast":null,"code":"import _regeneratorRuntime from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/pandi95/Projects/React/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { apiAdd, apiEdit, apiGetAll, apiGetOne, apiGetMy, apiDelete, apiStandMenu } from \"../../services/product/productService\";\nimport { uploadImage } from \"../utils/imageUploadAction\";\nimport { FETCH_PRODUCT, FAILED_PRODUCT, RECEIVE_PRODUCT, RECEIVE_ITEM_PRODUCT } from \"../types\";\n\nvar fetch = function fetch() {\n  return {\n    type: FETCH_PRODUCT\n  };\n};\n\nvar receiveItem = function receiveItem(currentItem) {\n  var meta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    type: RECEIVE_ITEM_PRODUCT,\n    payload: {\n      currentItem: currentItem,\n      meta: meta\n    }\n  };\n};\n\nvar receive = function receive(list) {\n  var meta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    type: RECEIVE_PRODUCT,\n    payload: {\n      list: list,\n      meta: meta\n    }\n  };\n};\n\nvar failed = function failed(error) {\n  return {\n    type: FAILED_PRODUCT,\n    payload: {\n      error: typeof error === 'object' ? error.message : error\n    }\n  };\n};\n\nvar add = function add(data, guard) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              dispatch(fetch());\n\n              if (!(data && data.image)) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 5;\n              return dispatch(uploadImage('product', data.image));\n\n            case 5:\n              data.image = _context.sent;\n\n            case 6:\n              _context.next = 8;\n              return apiAdd(data, guard);\n\n            case 8:\n              response = _context.sent;\n\n              if (!(response && response.success)) {\n                _context.next = 12;\n                break;\n              }\n\n              dispatch(receiveItem(response.data, response.meta));\n              return _context.abrupt(\"return\", response);\n\n            case 12:\n              dispatch(failed(response));\n              return _context.abrupt(\"return\", response);\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](0);\n              dispatch(failed(_context.t0));\n              return _context.abrupt(\"return\", _context.t0);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 16]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\n\nvar edit = function edit(id, data, guard) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n\n              if (!(data && !data.imageRaw)) {\n                _context2.next = 5;\n                break;\n              }\n\n              _context2.next = 4;\n              return dispatch(uploadImage('product', data.image));\n\n            case 4:\n              data.image = _context2.sent;\n\n            case 5:\n              _context2.next = 7;\n              return apiEdit(id, data, guard);\n\n            case 7:\n              response = _context2.sent;\n\n              if (!(response && response.success)) {\n                _context2.next = 14;\n                break;\n              }\n\n              dispatch(receiveItem(response.data, response.meta));\n\n              if (!response) {\n                _context2.next = 12;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", response);\n\n            case 12:\n              _context2.next = 16;\n              break;\n\n            case 14:\n              dispatch(failed(response));\n              return _context2.abrupt(\"return\", response);\n\n            case 16:\n              _context2.next = 22;\n              break;\n\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](0);\n              dispatch(failed(_context2.t0));\n              return _context2.abrupt(\"return\", _context2.t0);\n\n            case 22:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 18]]);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\n\nvar getAll = function getAll(data, guard) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              dispatch(fetch());\n              _context3.next = 4;\n              return apiGetAll(data, guard);\n\n            case 4:\n              response = _context3.sent;\n\n              if (!(response && response.success)) {\n                _context3.next = 8;\n                break;\n              }\n\n              dispatch(receive(response.data, response.meta));\n              return _context3.abrupt(\"return\", response);\n\n            case 8:\n              dispatch(failed(response));\n              return _context3.abrupt(\"return\", response);\n\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](0);\n              return _context3.abrupt(\"return\", dispatch(failed(_context3.t0)));\n\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 12]]);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\n\nvar getOne = function getOne(id, guard) {\n  return /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              dispatch(fetch());\n              _context4.next = 4;\n              return apiGetOne(id, guard);\n\n            case 4:\n              response = _context4.sent;\n\n              if (!(response && response.success)) {\n                _context4.next = 8;\n                break;\n              }\n\n              dispatch(receiveItem(response.data));\n              return _context4.abrupt(\"return\", response);\n\n            case 8:\n              dispatch(failed(response));\n              return _context4.abrupt(\"return\", response);\n\n            case 12:\n              _context4.prev = 12;\n              _context4.t0 = _context4[\"catch\"](0);\n              return _context4.abrupt(\"return\", dispatch(failed(_context4.t0)));\n\n            case 15:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 12]]);\n    }));\n\n    return function (_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};\n/*\n  type: all, member, owner\n*/\n\n\nvar getMy = function getMy(data, guard) {\n  return /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              dispatch(fetch());\n              _context5.next = 4;\n              return apiGetMy(data, guard);\n\n            case 4:\n              response = _context5.sent;\n\n              if (!(response && response.success)) {\n                _context5.next = 8;\n                break;\n              }\n\n              dispatch(receive(response.data, response.meta));\n              return _context5.abrupt(\"return\", response);\n\n            case 8:\n              dispatch(failed(response));\n              return _context5.abrupt(\"return\", response);\n\n            case 12:\n              _context5.prev = 12;\n              _context5.t0 = _context5[\"catch\"](0);\n              return _context5.abrupt(\"return\", dispatch(failed(_context5.t0)));\n\n            case 15:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[0, 12]]);\n    }));\n\n    return function (_x5) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n};\n\nvar deleteData = function deleteData(id, guard) {\n  return /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              dispatch(fetch());\n              _context6.next = 4;\n              return apiDelete(id, guard);\n\n            case 4:\n              response = _context6.sent;\n\n              if (!(response && response.success)) {\n                _context6.next = 11;\n                break;\n              }\n\n              dispatch(receiveItem(response.data, response.meta));\n\n              if (!response) {\n                _context6.next = 9;\n                break;\n              }\n\n              return _context6.abrupt(\"return\", response);\n\n            case 9:\n              _context6.next = 13;\n              break;\n\n            case 11:\n              dispatch(failed(response));\n              return _context6.abrupt(\"return\", response);\n\n            case 13:\n              _context6.next = 19;\n              break;\n\n            case 15:\n              _context6.prev = 15;\n              _context6.t0 = _context6[\"catch\"](0);\n              dispatch(failed(_context6.t0));\n              return _context6.abrupt(\"return\", _context6.t0);\n\n            case 19:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[0, 15]]);\n    }));\n\n    return function (_x6) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n};\n\nvar getStandMenu = function getStandMenu(id, guard) {\n  return /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              dispatch(fetch());\n              _context7.next = 4;\n              return apiStandMenu(id, guard);\n\n            case 4:\n              response = _context7.sent;\n\n              if (!(response && response.success)) {\n                _context7.next = 8;\n                break;\n              }\n\n              dispatch(receive(response.data, response.meta));\n              return _context7.abrupt(\"return\", response);\n\n            case 8:\n              dispatch(failed(response));\n              return _context7.abrupt(\"return\", response);\n\n            case 12:\n              _context7.prev = 12;\n              _context7.t0 = _context7[\"catch\"](0);\n              return _context7.abrupt(\"return\", dispatch(failed(_context7.t0)));\n\n            case 15:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[0, 12]]);\n    }));\n\n    return function (_x7) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n};\n\nexport { add, edit, getOne, getAll, getMy, deleteData, getStandMenu };","map":null,"metadata":{},"sourceType":"module"}