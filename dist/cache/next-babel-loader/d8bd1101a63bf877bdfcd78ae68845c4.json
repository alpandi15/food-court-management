{"ast":null,"code":"import { apiEditProfile, apiChangeEmail, apiChangePassword, apiChangePhone } from \"../../services/account/accountService\";\nimport { uploadImage } from \"../utils/imageUploadAction\";\nimport { FAILED_CHANGE_ACCOUNT, FETCH_CHANGE_ACCOUNT, RECEIVE_CHANGE_ACCOUNT } from \"../types\";\nimport { getUserData } from \"../auth/authAction\";\n\nconst fetch = () => {\n  return {\n    type: FETCH_CHANGE_ACCOUNT\n  };\n};\n\nconst received = () => {\n  return {\n    type: RECEIVE_CHANGE_ACCOUNT\n  };\n};\n\nconst failed = error => {\n  return {\n    type: FAILED_CHANGE_ACCOUNT,\n    payload: {\n      error: typeof error === 'object' ? error.message : error\n    }\n  };\n};\n\nconst updateProfile = (data, guard) => async dispatch => {\n  try {\n    dispatch(fetch());\n\n    if (data && data.image && !data.imageRaw) {\n      data.image = await dispatch(uploadImage('user', data.image));\n    }\n\n    const response = await apiEditProfile(data, guard);\n\n    if (response.success) {\n      dispatch(getUserData(guard));\n      return response;\n    }\n\n    dispatch(failed(response));\n    return response;\n  } catch (error) {\n    dispatch(failed(error));\n  }\n};\n\nconst changeEmail = (data, guard) => async dispatch => {\n  try {\n    dispatch(fetch());\n    const response = await apiChangeEmail(data, guard);\n    dispatch(received());\n    dispatch(getUserData(guard));\n\n    if (response.success) {\n      return response;\n    }\n\n    dispatch(failed(response));\n    return response;\n  } catch (error) {\n    dispatch(failed(error));\n  }\n};\n\nconst changePassword = (data, guard) => async dispatch => {\n  try {\n    dispatch(fetch());\n    const response = await apiChangePassword(data, guard); // dispatch(getUserData())\n\n    if (response.success) {\n      return response;\n    }\n\n    dispatch(failed(response));\n    return response;\n  } catch (error) {\n    dispatch(failed(error));\n  }\n};\n\nconst changePhone = (data, guard) => async dispatch => {\n  try {\n    dispatch(fetch());\n    const response = await apiChangePhone(data, guard); // dispatch(getUserData())\n\n    if (response.success) {\n      return response;\n    }\n\n    dispatch(failed(response));\n    return response;\n  } catch (error) {\n    dispatch(failed(error));\n  }\n};\n\nexport { updateProfile, changeEmail, changePassword, changePhone };","map":null,"metadata":{},"sourceType":"module"}