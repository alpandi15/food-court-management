{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button } from 'react-materialize';\nimport { connect } from 'react-redux';\nimport Select from \"../Form/SelectionDefault\";\nimport Modal from \"../Modal\";\nimport { logoutUser } from \"../../actions/auth/authAction\";\nimport { getMy } from \"../../actions/foodcourt/foodCourtAction\";\nimport { get, set } from \"../../services/utils/storage\";\nimport Image from \"../Image\";\nimport noImage from \"../../static/Image/default_image.png\";\nimport { GUARD_OWNER, FOODCOURT_SELECTED } from \"../../constants\";\n\nconst generateOption = datas => {\n  let options = [];\n  datas.map(value => {\n    return options.push({\n      value: String(value.id),\n      id: String(value.id),\n      label: value.name\n    });\n  });\n  return options;\n};\n\nconst MemoModal = /*#__PURE__*/React.memo(Modal);\n\nconst SideNav = ({\n  userData,\n  logoutUser,\n  getMy,\n  list\n}) => {\n  const history = useHistory();\n  const [modal, setModal] = React.useState(false);\n  const [selected, setSelected] = React.useState(null);\n  React.useEffect(() => {\n    const fetch = async () => {\n      await getMy();\n    };\n\n    fetch();\n  }, [getMy]);\n  React.useEffect(() => {\n    const selectedCache = async () => {\n      if (list && list.length > 0) {\n        const getCache = await get(FOODCOURT_SELECTED);\n        setSelected(getCache);\n      }\n    };\n\n    selectedCache();\n  }, [list, get]); // const handleModal = (status) => {\n  //   setModal(status)\n  // }\n\n  const handleModal = React.useCallback(setModal, []);\n  const handleLogout = React.useCallback(async () => {\n    await logoutUser(GUARD_OWNER);\n    setModal(false);\n    history.push('/owner/login');\n  }, []);\n\n  const handleSelected = id => {\n    setSelected(id);\n    set(FOODCOURT_SELECTED, id);\n    console.log(selected);\n    window.location.reload();\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"col s12 m4 l3\"\n  }, __jsx(\"div\", {\n    className: \"profile-content\"\n  }, __jsx(\"div\", {\n    className: \"image\"\n  }, __jsx(Image, {\n    src: userData && userData.image && userData.image.url,\n    className: \"user-image\",\n    alt: \"Profile\",\n    defaultsrc: noImage,\n    style: {\n      width: '100%'\n    }\n  })), __jsx(\"div\", {\n    className: \"name\"\n  }, userData ? userData.name : 'No Name'), __jsx(\"div\", {\n    className: \"content-select\"\n  }, __jsx(Select, {\n    options: list,\n    onChange: e => handleSelected(e.target.value),\n    defaultValue: selected || null,\n    className: \"select-foodcourt\"\n  }))), __jsx(\"div\", {\n    className: \"nav-menu\"\n  }, __jsx(Link, {\n    to: \"/owner\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"dashboard\"), \"Dashboard\"), __jsx(Link, {\n    to: \"/owner/stand\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"device_hub\"), \"Stand\"), __jsx(Link, {\n    to: \"/owner/register\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"table_chart\"), \"Management Meja\"), __jsx(Link, {\n    to: \"/owner/register\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"book\"), \"Laporan\"), __jsx(Link, {\n    to: \"/owner/settings\",\n    className: \"menu-item waves-effect\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"settings\"), \"Pengaturan\")), __jsx(\"div\", {\n    onClick: () => handleModal(true),\n    className: \"container-logout waves-effect\"\n  }, __jsx(\"div\", {\n    className: \"logout\"\n  }, __jsx(\"i\", {\n    className: \"material-icons\"\n  }, \"login\"), \"Logout\"))), __jsx(MemoModal, {\n    open: modal,\n    onCloseStart: handleModal,\n    id: \"ModalInformasi\",\n    endingTop: \"40%\",\n    footerContent: null\n  }, __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"modal-content-owner\"\n  }, __jsx(\"div\", {\n    className: \"modal-title logout\"\n  }, \"Ingin keluar dari akun kamu ?\")), __jsx(\"div\", {\n    className: \"modal-footer-owner\"\n  }, __jsx(Button, {\n    className: \"waves-effect waves-light\",\n    modal: \"close\",\n    node: \"button\",\n    style: {\n      color: 'red !important'\n    }\n  }, \"Tidak\"), __jsx(\"button\", {\n    className: \"waves-effect waves-light btn red\",\n    onClick: () => handleLogout(),\n    node: \"button\",\n    style: {\n      backgroundColor: 'red !important'\n    }\n  }, \"Keluar\")))));\n};\n\nconst mapStateToProps = state => {\n  const {\n    accountStore,\n    foodCourt\n  } = state;\n  return {\n    loadingUser: accountStore.loading,\n    userData: accountStore.currentItem,\n    list: generateOption(foodCourt.list)\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  logoutUser: guard => dispatch(logoutUser(guard)),\n  getMy: data => dispatch(getMy(data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SideNav);","map":null,"metadata":{},"sourceType":"module"}